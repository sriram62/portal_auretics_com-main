{% extends 'mlm_admin/include/base.html' %}
{% block extra_styles %}
<style>
    .regi_inpu select {
    width: 100%;
    padding: 14px 11px;
    border: 1px solid #e5e5e5;
}
.shubh_terms a{
    color:#000;
    text-decoration:underline;
}
.shubh_terms a:hover{
    text-decoration:underline !important;
}
</style>
{% endblock extra_styles %}

{% block content %}
<!-- End of search overlay -->
<div class="container">
    <!-- personal details start-->
    <div class="row regi_header">
        <div class="col-md-12">
            <a class="btn btn-success btn-action" href="{% url 'referral_list'  %}">
                <button type="button" class="btn btn-icon btn-success">
                <i class="fa fa-arrow-circle-o-left" style="font-size:30px;color:black"></i></button>
            </a><p>{{registration_form}}</p>
        </div>
    </div>
    <form method="POST" name='registrationform' id="my-form"  enctype="multipart/form-data" novalidate>
        {% csrf_token %}
    <div class="row regibg_bg">
        <div class="col-md-12">
            <div class="head_new mt-40"> Personal Details
            </div>
        </div>
          <div class="col-md-6">
            <label for="firstname" class="regi_lab">First name*
<!--            <input type="checkbox" id="firstname_check" name="check_first_name" class="regi_lab" value="{{ profile.firstname }}" placeholder="Enter first name" required="required">-->
              {{check_form.check_first_name}}</label>
            <input type="text" id="id_firstname" name="firstname" class="regi_inpu" value="{{ profile.first_name }}" placeholder="Enter first name" required="required">
              <div class="error alert-danger"  id="e_fname" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="lastname" class="regi_lab">Last name
<!--            <input type="checkbox" id="lastname_check" name="check_lastname" class="regi_lab" placeholder="Enter last name" value="{{ request.user.lastname }}">-->
            {{check_form.check_last_name}}</label>
            <input type="text" id="id_lastname" name="lastname" class="regi_inpu" placeholder="Enter last name" value="{{ profile.last_name }}">
        </div>
        <div class="col-md-12">
            <label for="email" class="regi_lab">Email Id*
<!--            <input type="checkbox" name="email" class="regi_lab" id="check_email" placeholder="Enter email id"></label>-->
            {{check_form.check_email}}</label>
            <input type="email" name="email" class="regi_inpu" id="id_email" value="{{profile.email}}" placeholder="Enter email id" readonly>
            <div class="error alert-error"  id="errr_email" style="display:none;" ></div>
            <div class="error alert-danger" id="e_email"></div>
        </div>


        <!--<div class="col-md-6">-->
        <!--    <label for="referral_code" class="regi_lab">Referrer *</label>-->
        <!--    <input type="text" id="id_referral" name="referral" class="regi_inpu" placeholder="Enter Referrer">-->
        <!--</div>-->

<!--        <div class="col-md-6">-->
<!--            <label for="password" class="regi_lab">Password*-->
<!--            <input type="checkbox" id="password" name="password_check" class="regi_lab" placeholder="Enter your password"></label>-->
<!--            <input type="password" id="id_password" name="password" class="regi_inpu" value="{{profile_password}}" placeholder="Enter your password">-->
<!--            <div class="error alert-error" id="err_password" style="display:none;"></div>-->
<!--            <div class="error alert-danger" id="e_pass"></div>-->
<!--        </div>-->
<!--        <div class="col-md-6">-->
<!--            <label for="confirmPassword" class="regi_lab">Re Enter Password*-->
<!--            <input type="checkbox" id="confirmPassword" name='confirmPassword_check' class="regi_lab" placeholder="Re Enter Password"></label>-->
<!--            <input type="password" id="id_confirmPassword" name='confirmPassword' class="regi_inpu" placeholder="Re Enter Password">-->
<!--            <div class="error alert-error" id="err_confirmPassword" style="display:none;"></div>-->
<!--            <div class="error alert-danger" id="e_cnfpass"></div>-->
<!--        </div>-->

        <div class="col-md-6">
            <label for="birthday" class="regi_lab">Birthday*
<!--            <input type="checkbox" id="birthday" name ='birthday_check' class="regi_lab" placeholder="choose your dob" ></label>-->
            {{check_form.check_date_of_birth}}</label>
            <input type="date" id="id_birthday" name ='birthday' class="regi_inpu" value="{{profile.date_of_birth|date:'Y-m-d'}}" placeholder="choose your dob" >
            <div class="error alert-error" id="err_birthday" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="co-applicant" class="regi_lab"> Co-Applicant’s Name (if Co-Applying)
            {{check_form.check_co_applicant}}</label>
            <input type="text" id="id_co-applicant" name="co_applicant"  value="{{profile.co_applicant}}" class="regi_inpu" placeholder="Enter co-applicant name">
            <div class="error alert-error" id="err_coapplicant" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="#" class="regi_lab">Blood Group*
            {{check_form.check_blood_group}}</label>
            <select class="regi_inpu" name="blood_group">
                            <option value='A'  {% if profile.blood_group == 'A' %} selected {% endif %}>A</option>
                            <option value='B' {% if profile.blood_group == 'B' %} selected {% endif %}>B</option>
                            <option value='AB' {% if profile.blood_group == 'AB' %} selected {% endif %}>AB</option>
                            <option value='O' {% if profile.blood_group == 'O' %} selected {% endif %}>O</option>
                            <option value="I don't know" {% if profile.blood_group == "I don't know" %} selected {% endif %}>I don't Know</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="birthday" class="regi_lab">Blood RH Factor*
            {{check_form.check_blood_rh_factor}}</label>
            <select class="regi_inpu" name="blood_rh_factor">
                            <option value='positive' {% if profile.blood_rh_factor == 'positive' %} selected {% endif %}>Positive(+)</option>
                            <option value='negative' {% if profile.blood_rh_factor == 'negative' %} selected {% endif %}>Negative(-)</option>
                            <option value="I don't know" {% if profile.blood_rh_factor == "I don't know" %} selected {% endif %}>I don't Know</option>
            </select>
    </div>
        <div class="col-md-6">
            <label for="birthday" class="regi_lab">Gender*
            {{check_form.check_gender}}</label>
            <select class="regi_inpu" name="gender">
                            <option value='Other' {% if profile.gender == 'Other' %} selected {% endif %}>Other</option>
                            <option value='Male' {% if profile.gender == 'Male' %} selected {% endif %}>Male</option>
                            <option value="Female" {% if profile.gender == "Female" %} selected {% endif %}>Female</option>
            </select>
    </div>
        <div class="col-md-6">
            <label for="city" class="regi_lab">State*{{check_form.own_check_state}}</label>
            <select class="regi_inpu" name="own_state" id="own_state">
            {% for i in state %}
                <option value="{{i.pk}}" {% if profile.state.pk == i.pk %} selected {% endif %}>{{i.state_name}}</option>
            {% endfor %}
            </select>
            <div class="error alert-error" id="err_own_state" style="display:none;"></div>
        </div>
    </div>
        <!-- personal details end-->
    <!--referral code-start-->

    <!--referral-end-->
       <div class="row reff_bg pt-20">
            <div class="col-md-12">
              <div class="head_new">
                Referral Details
              </div>
             </div>
             <div class="col-md-12" >
            <label  class="regi_lab">Position* WARNING!!! DONOT CHANGE THE POSITION!</label>
            <select class="regi_inpu" id="position" name="position" readonly>
                            <option value='LEFT' {% if referal_code.position == 'LEFT'%} selected {% endif %}>LEFT</option>
                            <option value='RIGHT' {% if referal_code.position == 'RIGHT'%} selected {% endif %}>RIGHT</option>
            </select>
            <div class="error alert-error" id="err_position" style="display:none;"></div>
            </div>
          </div>
    <!-- Address-start -->
    <div class="row addbg_bg">
        <div class="col-md-12">
            <div class="head_new">
                Address Details <sup>({{address.id}})</sup>
            </div>
        </div>
        <div class="col-md-6">
            <label for="house" class="regi_lab">House Number*
<!--            <input type="checkbox" id="house_check" class="regi_lab" name="house" placeholder="Enter house number" ></label>-->
            {{check_form.check_house_number}}</label>
            <input type="text" id="house" class="regi_inpu" name="house" value="{{address.house_number}}" placeholder="Enter house number" >
            <div class="error alert-error" id="err_house" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="confirm-password" class="regi_lab">Street
<!--            <input type="checkbox" class="regi_lab" name="street_check" id="street_check" placeholder="Enter street name" ></label>-->
            {{check_form.check_street}}</label>
            <input type="street" class="regi_inpu" name="street" id="street" value="{{address.street}}" placeholder="Enter street name" >
            <div class="error alert-error" id="err_street" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="address2" class="regi_lab">Address line 2
<!--            <input type="checkbox" id="address2_check" name="address2_check" class="regi_lab" placeholder="Enter address"></label>-->
            {{check_form.check_address_line}}</label>
            <input type="text" id="address2" name="address2" class="regi_inpu" value="{{address.address_line}}" placeholder="Enter address">
            <div class="error alert-error" id="err_address2" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="confirm-password" class="regi_lab">Landmark
<!--            <input type="checkbox" class="regi_lab" name="landmark_check" id="landmark_check" placeholder="Enter landmark"></label>-->
            {{check_form.check_Landmark}}</label>
            <input type="landmark" class="regi_inpu" name="landmark" id="landmark" value="{{address.Landmark}}" placeholder="Enter landmark">
            <div class="error alert-error" id="err_landmark" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="city" class="regi_lab">City*
<!--            <input type="checkbox" id="city_check" class="regi_lab" name="city_check" placeholder="Enter city"></label>-->
            {{check_form.check_city}}</label>
            <input type="text" id="city" class="regi_inpu" name="city" value="{{address.city}}" placeholder="Enter city">
            <div class="error alert-error" id="err_city" style="display:none;"></div>
        </div>

        <div class="col-md-6">
            <label for="city" class="regi_lab">State*{{check_form.check_state}}</label>
            <select class="regi_inpu" name="state" id="state">
            {% for i in state %}
                <option value="{{i.pk}}" {% if address.state.pk == i.pk %} selected {% endif %}>{{i.state_name}}</option>
            {% endfor %}
            </select>
            <div class="error alert-error" id="err_state" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="pincode" class="regi_lab">Pin Code*
<!--            <input type="checkbox" class="regi_lab" id="regi_lab" name="pincode" placeholder="Enter pincode"></label>-->
            {{check_form.check_pin}}</label>
            <input type="pincode" class="regi_inpu" id="pincode" name="pincode" value="{{address.pin}}" placeholder="Enter pincode">
            <div class="error alert-error" id="err_pincode" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="mobile" class="regi_lab">Mobile No*
<!--            <input type="checkbox" id="mobile_check" class="regi_lab" name="phone_check" placeholder="Enter mobile no"></label>-->
            {{check_form.check_mobile}}</label>
            <input type="number" id="mobile" class="regi_inpu" name="phone" value="{{address.mobile}}" placeholder="Enter mobile no" readonly>
            <div class="error alert-error" id="err_mobile" style="display:none;"></div>
        </div>
        <div class="col-md-6">
            <label for="altmobile" class="regi_lab">Alternate Mobile No.
<!--            <input type="checkbox" class="regi_lab" name="altphone_check" id="altmob_check" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_alternate_mobile}}</label>
            <input type="number" class="regi_inpu" name="altphone" id="altmob" value="{{address.alternate_mobile}}" placeholder="Enter Alternate Mobile">
            <div class="error alert-error" id="alterr_phone" style="display:none;"></div>
        </div>


    </div>
    <!--address-end-->

    <!-- kyc details start-->
    <div class="row kycbg-bg">
        <div class="col-md-12">
            <div class="head_new">
                KYC Details
            </div>
        </div>
         <!--remove data  -->
        <div class="container">

            <from method="POST" enctype="multipart/form-data">
                <div class="row">
                <div class="col-md-6">

                </div>

                <div class="col-md-6">
                    {{ form.non_field_errors }}
                    {{ form.source.errors }}
                    {{ form.source }}


                </div>

                <div class="col-md-6 regi_lab">
                    <label for="panno" class="">PAN No.
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_pan_number}}</label>

                    {{ form.pan_number.errors }}
                    <div class="regi_inpu"> {{ form.pan_number }}</div>

                </div>
                <div class="col-md-6  regi_lab">
                    <label for="id_pan_file" class="">Upload Pan Card
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_pan_file}}</label>
            {% if pan_file %}
                    <a target="_blank" href="{{pan_file.url}}">
                        <img class="col-sm-6 col-md-3" src="{{pan_file.url}}" width="100px" height="100px" /></a>
            {% endif %}
                    <div class="regi_inpu">
                    {{ form.pan_file }}
                        </div>
                </div>

                <div class="col-md-6  regi_lab">
                    <label class="">ID Proof Type
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_id_proof_type}}</label>
                    <div class="regi_inpu"> {{ form.id_proof_type}}</div>

                </div>
                <div class="col-md-6  regi_lab">
                    <label for="id_id_proof_file" class="">Upload Id Proof
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_id_proof_file}}</label>
            {% if id_proof_file %}
                    <a target="_blank" href="{{id_proof_file.url}}">
            <img class="col-sm-6 col-md-3" src="{{id_proof_file.url}}" width="100px" height="100px" /></a>
            {% endif %}<br>
                    <div class="regi_inpu">
                    {{ form.id_proof_file }}
                        </div>
                </div>

                <div class="col-md-6  regi_lab">
                    <label class="">Address Proof Type
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_address_proof_type}}</label>
<!--            {% if address_proof_type %}-->
<!--                    <a target="_blank" href="{{address_proof_type.url}}">-->
<!--            <img class="col-sm-6 col-md-3" src="{{address_proof_type.url}}" width="100px" height="100px" /></a>-->
<!--            {% endif %}-->
                    <div class="regi_inpu">
                    {{ form.address_proof_type }}</div>
                </div>
                <div class="col-md-6  regi_lab">
                    <label for="id_address_proof_file" class="">Address Proof Upload
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_address_proof_file}}</label>
            {% if address_proof_file %}
                    <a target="_blank" href="{{address_proof_file.url}}">
            <img class="col-sm-6 col-md-3" src="{{address_proof_file.url}}" width="100px" height="100px" /></a>
            {% endif %}<br>
                    <div class="regi_inpu">
                    {{ form.address_proof_file }}
                        </div>
                </div>
                </div>
            <!-- {{ form }} -->
        </from>
        </div>
    </div>
    <!--kyc details end-->

    <!-- bank details start-->
    <div class="row bankbg_bg">
        <!--{{ bank_form }}-->
        <div class="col-md-12">
            <div class="head_new">
                Bank Account Details
            </div>
        </div>

        <div class="col-md-6  regi_lab">
            <label for="Distributor" class="">Distributor’s Name in Bank Account
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_distributors_name_in_bank_account}}</label>
            <div class="regi_inpu">
            {{ bank_form.distributors_name_in_bank_account }}
                </div>
            <!--<input type="text" id="Distributor" class="regi_inpu" placeholder="Enter Distributor name">-->
        </div>
        <div class="col-md-6  regi_lab">
            <label for="ifsccode" class="">IFSC Code
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_ifsc_code}}</label>
            <div class="regi_inpu">
            {{ bank_form.ifsc_code }}
            </div>
            <!--<input type="text" id="IFSCCode" class="regi_inpu" placeholder="Enter ifsc name">-->
        </div>

        <div class="col-md-6 regi_lab">
            <label for="birthday" class="">Bank Name
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_bank_name}}</label>
            <div class="regi_inpu">
            {{ bank_form.bank_name }}
            </div>
            <!--<input type="bankname" id="bankname" class="regi_inpu" placeholder="Enter bank name">-->
        </div>
        <div class="col-md-6  regi_lab">
            <label for="Branchname" class=""> Branch Name
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_branch_name}}</label>
            <div class="regi_inpu">
            {{ bank_form.branch_name }}
                </div>
            <!--<input type="text" id="Branch name" class="regi_inpu" placeholder="Enter branch name">-->
        </div>


        <div class="col-md-6 regi_lab">
            <label for="birthday" class="">Account Number
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_account_number}}</label>
            <div class="regi_inpu">
             {{ bank_form.account_number }}
                </div>
            <!--<input type="account" id="accountno" class="regi_inpu" placeholder="Enter Account number">-->
        </div>
        <div class="col-md-6 regi_lab">
            <label for="Cheque" class="">Cheque Photo
<!--                    <input type="checkbox" class="regi_lab" placeholder="Enter Alternate Mobile"></label>-->
            {{check_form.check_cheque_photo}}</label>
            {% if cheque_photo %}
                    <a target="_blank" href="{{cheque_photo.url}}">
                        <img class="col-sm-6 col-md-3" src="{{cheque_photo.url}}" width="100px" height="100px" /></a>
            {% endif %}<br>
            <div class="regi_inpu">
            {{ bank_form.cheque_photo }}
                </div>
            <!--<input type="file" id="choose-cheque-id" size="80">-->
        </div>

    </div>
    <!--bank details end-->

    <!--terms & conditions start-->
    <div class="row terms_condi">
        <div class="col-md-12">
            <label>{{check_form.check_profile_active}} Profile Active</label>
            <!--<input type="checkbox" value="age">-->
        </div>
        <div class="col-md-12">
            <label>{{check_form.check_age_confirmation}} I am at-least 18 year old</label>
            <!--<input type="checkbox" value="age">-->
        </div>
        <div class="col-md-12 shubh_terms">
            <label>{{ check_form.check_first_terms_conditions}} I Accept All the <a href="javascript:void(0)">Terms &amp;
                    Conditions</a></label>
        </div>
         <div class="col-md-12 shubh_terms">
            <label>{{ check_form.check_second_terms_conditions}} I understand that becoming a part of this business is free of charge, and there is no need to pay any joining fee or purchase any specific amount of products, and all the money expended by me is for purchasing of goods and not for any form of Investment. I have taken and understood the orientation program (either online or in-person) and best practises for Direct Selling Marketeer. I have also read and understood the “Guidelines on Direct Selling” issued by the Government. <a href="javascript:void(0)">Terms &amp;
                    Conditions</a></label>
        </div>
    </div>
    <!--terms & conditions end-->
    <!--submit-->
    <div class="row form-footer">
        <div class="col-md-12">
            <span>* required</span>
            <input type="submit" class="btn btn-secondary btn-lg pull-right regibtn_btn" name="submit" id="submit" value="Complete Registration" onclick="a();">
            <!-- <button type="button" class="btn btn-secondary btn-lg pull-right regibtn_btn">Complete Registration</button> -->
        </div>
    </div>
    <!--end-->
    </form>
</div>

{% endblock %}
{% block extra_scripts %}
<script>
 $('document').ready(function(){
 var mobile_state = false;
 var email_state = false;
 $('#mobile').on('blur', function(){
  var mobile = $('#mobile').val();
  if (mobile == '') {
  	mobile_state = false;
  	return;
  }
  $.ajax({
    url: '/ajax/validate_mobile/',
    type: 'get',
    data: {
    	'mobile' : mobile,
    },
    success: function(response){
      if (response.code == 200 ) {
      	mobile_state = false;
      	$('#err_mobile').html('Mobile Number already exists.');
		$("#err_mobile").css("display", "block");
		$('#err_mobile').fadeIn();
		$('#err_mobile').show();
      }else if (response.code == 400) {
<!--        alert('response code 400 h');-->
        $('#err_mobile').hide();
      	mobile_state = true;
      }
    }
  });
 });

 $('#my-form').submit(function(){
    var error_fname = false;
     var error_birthday = false;
     var error_email = false;
     var error_house = false;
     var error_pass = false;
     var error_city = false;
     var error_pincode = false;
     var error_mobile = false;
     var error_email_check = false;
     var error_mobile_check = false;
     var data1 = true;

     var fname = $("#id_firstname").val()
      if ( fname !== '') {
      $("#e_fname").hide();
      } else {
         $("#e_fname").html("This field is required");
         $("#e_fname").show();
         error_fname = true;
      }
      var birthday = $("#id_birthday").val().length;
      if (birthday != '' ) {
      $("#err_birthday").hide();
      } else {
         $("#err_birthday").html("This field is required");
         $("#err_birthday").show();
         error_birthday = true;
      }
      var house = $("#house").val()
      if (house !== '') {
         $("#err_house").hide();
      } else {
         $("#err_house").html("This field is required");
         $("#err_house").show();
         error_house = true;
      }
      var referral_code = $("#id_referral_code").val()
      if (referral_code !== '') {
      $("#err_referral_code").hide();
      } else {
         $("#err_referral_code").html("This field is required");
         $("#err_referral_code").show();
         error_referral_code = true;
      }
      var house = $("#house").val()
      if (house !== '') {
         $("#err_house").hide();
      } else {
         $("#err_house").html("This field is required");
         $("#err_house").show();
         error_house = true;
      }
      var pass_length = $("#id_password").val().length;
      if(pass_length < 8) {
         $("#e_pass").html("Atleast 8 Characters");
         $("#e_pass").show();
         error_pass = true;
      } else {
         $("#e_pass").hide();
         }
      var pass = $("#id_password").val().length;
      var cnfpass = $("#id_confirmPassword").val().length;
      if(pass != cnfpass) {
         $("#e_cnfpass").html("Password is not match");
         $("#e_cnfpass").show();
         error_pass = true;
      } else {
         $("#e_cnfpass").hide();
         }
      var city = $("#city").val()
      if (city !== '') {
         $("#err_city").hide();
      } else {
         $("#err_city").html("This field is required");
         $("#err_city").show();
         error_city = true;
      }
      var pincode = $("#pincode").val()
      if (pincode !== '') {
      $("#err_pincode").hide();
      } else {
         $("#err_pincode").html("This field is required");
         $("#err_pincode").show();
         error_pincode = true;
      }
      var mobile = $("#mobile").val().length;
      if (mobile < 11 && mobile > 9) {
         $("#err_mobile").hide();
      } else {
         $("#err_mobile").html("Mobile number must contain 10 digit");
         $("#err_mobile").show();
         error_mobile = true;
      }
<!--    alert('submit');-->
<!-- 	alert(mobile_state);-->
<!-- 	alert(email_state);-->
 	if (mobile_state == false || email_state == false || error_fname === true || error_birthday === true || error_email === true  || error_house === true || error_pass == true || error_city === true || error_pincode === true) {
	   $('body, html').animate({scrollTop:$('#my-form').offset().top}, 'slow');
	  return false;
	}else{
      // proceed with form submission
       return true;
 	}
 });
});
</script>

<script>
$("#pincode").on("keypress keyup blur",function (event) {
   $(this).val($(this).val().replace(/[^\d].+/, ""));
   var pincode = $("#pincode").val().length;
    if ((event.which < 48 || event.which > 57)) {
        event.preventDefault();
    }
    if (( pincode > 5)){
        event.preventDefault();
    }
});
</script>
<script>
$("#mobile").on("keypress keyup blur",function (event) {
   $(this).val($(this).val().replace(/[^\d].+/, ""));
   var mobile = $("#mobile").val().length;
    if ((event.which < 48 || event.which > 57)) {
        event.preventDefault();
    }
    if (( mobile > 9)){
        event.preventDefault();
    }
});
</script>
<script>

$(document).ready(function() {
    $( "#ageid").prop('checked', true);
    $( "#deid").prop('checked', true);
    $( "#declaration").prop('checked', true);
});
</script>
<script>
$('#id_referral_code').change(function () {
			$('#erro_referral_code').hide();
			var erro_referral_code = false;
				var ref_legth = $('#id_referral_code').val().length;
				var referral_code = $(this).val();
				if (ref_legth == 0) {
					$('#erro_referral_code').html('please enter name');
					$("#erro_referral_code").css("display", "block");
					$('#erro_referral_code').fadeIn();
					$('#erro_referral_code').show();
					var erro_firstname = true;
					$('#submit').attr('disabled',true);
				}
				else {
					$('#erro_referral_code').hide();
					$('#submit').attr('disabled',false);
				}
				$.ajax({
				url: '/ajax/validate_ref/',
				data: {
					'referral_code': referral_code
				},
				dataType: 'json',
				success: function (data) {
					if (data.ref_by) {
						// alert("A user with this username already exists.");
						$('#error_firstname').html('');
					$("#error_firstname").css("display", "block");
					$('#error_firstname').fadeIn();
					$('#error_firstname').show();
					var erro_firstname = true;
					$('#submit').attr('disabled',true);
					}
				}
			});
			});

			$('#id_referral_code').focusout(function () {
				var referall_code = $(this).val();
				$("#err_referral_code").hide()
				let aa='';
				$.ajax({
				url: '/ajax/validate_ref/',
				data: {
					'referall_code': referall_code
				},
				dataType: 'json',
				success: function(data){
				    console.log(data.refer_by)
					if (data.code === 200) {
					    aa = data.refer_by
				        $("#referral_code_id").hide();
				        $("#referral_user").css("display", "block");
				        $("#id_referral_user").append(aa);
					}else if(data.code === 404){
						$('#err_referral_code').html('Reference Not matched');
					    $("#err_referral_code").css("display", "block");
					    $("#err_referral_code").show()
					    $('#submit').attr('disabled',true);

					}else{
					    $('#err_referral_code').html('Reference Not matched');
					    $("#err_referral_code").css("display", "block");
					    $("#err_referral_code").show();
					    $('#submit').attr('disabled',true);
					}


				},
				error: function (error) {
						console.log(error);

					}
				});
			});

	</script>
<script>

   $("#id_firstname").focusout(function(){
   check_fname();
   });
   $("#id_birthday").focusout(function(){
   check_birthday();
   });
   $("#id_email").focusout(function(){
   check_email();
   });
   $("#id_referral_code").focusout(function(){
   check_referral_code();
   });
   $("#house").focusout(function(){
   check_house();
   });
   $("#id_password").focusout(function() {
   check_pass();
   });
   $("#id_confirmPassword").focusout(function() {
   check_cnfpass();
   });
   $("#city").focusout(function() {
   check_city();
   });
   $("#pincode").focusout(function() {
   check_pincode();
   });
   $("#mobile").focusout(function() {
   check_mobile();
   });

   function check_fname() {
      var fname = $("#id_firstname").val()
      if ( fname !== '') {
      $("#e_fname").hide();
      } else {
         $("#e_fname").html("This field is required");
         $("#e_fname").show();
         error_fname = true;
      }
   }
   function check_birthday() {
      var birthday = $("#id_birthday").val().length;
      if (birthday != '' ) {
      $("#err_birthday").hide();
      } else {
         $("#err_birthday").html("This field is required");
         $("#err_birthday").show();
         error_birthday = true;
      }
   }
   function check_house() {
      var house = $("#house").val()
      if (house !== '') {
         $("#err_house").hide();
      } else {
         $("#err_house").html("This field is required");
         $("#err_house").show();
         error_house = true;
      }
   }
   function check_city() {
      var city = $("#city").val()
      if (city !== '') {
         $("#err_city").hide();
      } else {
         $("#err_city").html("This field is required");
         $("#err_city").show();
         error_city = true;
      }
   }
   function check_mobile() {
      var mobile = $("#mobile").val().length;
      if (mobile < 11 && mobile > 9) {
         $("#err_mobile").hide();
      } else {
         $("#err_mobile").html("Mobile number must contain 10 digit");
         $("#err_mobile").show();
         error_mobile = true;
      }
   }
   function check_referral_code() {
      var referral_code = $("#id_referral_code").val()
      if (referral_code !== '') {
      $("#err_referral_code").hide();
      } else {
         $("#err_referral_code").html("This field is required");
         $("#err_referral_code").show();
         error_referral_code = true;
      }
   }
   function check_pincode() {
      var pincode = $("#pincode").val()
      if (pincode !== '') {
      $("#err_pincode").hide();
      } else {
         $("#err_pincode").html("This field is required");
         $("#err_pincode").show();
         error_pincode = true;
      }
   }
   function check_email() {
    var pattern = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var email = $("#id_email").val();
    if ( pattern.test(email) && email !== '') {
      $("#errr_email").hide();
      } else {
      $("#errr_email").html("invalid Email");
      $("#errr_email").show();
      error_email = true;
      }
    }
    function check_pass() {
      var pass_length = $("#id_password").val().length;
      if(pass_length < 8) {
         $("#e_pass").html("Atleast 8 Characters");
         $("#e_pass").show();
         error_pass = true;
      } else {
         $("#e_pass").hide();
         }
      }
    function check_cnfpass() {
      var pass = $("#id_password").val().length;
      var cnfpass = $("#id_confirmPassword").val().length;
      if(pass != cnfpass) {
         $("#e_cnfpass").html("Password is not match");
         $("#e_cnfpass").show();
         error_pass = true;
      } else {
         $("#e_cnfpass").hide();
         }
      }
</script>

{% endblock extra_scripts %}
